"use strict";function _instanceof(e,r){if(r!=null&&typeof Symbol!=="undefined"&&r[Symbol.hasInstance]){return!!r[Symbol.hasInstance](e)}else{return e instanceof r}}function _typeof(e){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function e(r){return typeof r}}else{_typeof=function e(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return _typeof(e)}var to_ascii=typeof atob=="undefined"?function(e){return new Buffer(e,"base64").toString()}:atob;var to_base64=typeof btoa=="undefined"?function(e){return new Buffer(e).toString("base64")}:btoa;function read_source_map(e,r){var n=/\n\/\/# sourceMappingURL=data:application\/json(;.*?)?;base64,(\S+)\s*$/.exec(r);if(!n){AST_Node.warn("inline source map not found: "+e);return null}return to_ascii(n[2])}function parse_source_map(r){try{return JSON.parse(r)}catch(e){throw new Error("invalid input source map: "+r)}}function set_shorthand(r,n,e){if(n[r]){e.forEach(function(e){if(n[e]){if(_typeof(n[e])!="object")n[e]={};if(!(r in n[e]))n[e][r]=n[r]}})}}function init_cache(e){if(!e)return;if(!("props"in e)){e.props=new Dictionary}else if(!_instanceof(e.props,Dictionary)){e.props=Dictionary.fromObject(e.props)}}function to_json(e){return{props:e.props.toObject()}}function minify(o,a){try{a=defaults(a,{compress:{},enclose:false,ie8:false,keep_fnames:false,mangle:{},nameCache:null,output:{},parse:{},rename:undefined,sourceMap:false,timings:false,toplevel:false,warnings:false,wrap:false},true);var e=a.timings&&{start:Date.now()};if(a.rename===undefined){a.rename=a.compress&&a.mangle}set_shorthand("ie8",a,["compress","mangle","output"]);set_shorthand("keep_fnames",a,["compress","mangle"]);set_shorthand("toplevel",a,["compress","mangle"]);var r;if(a.mangle){a.mangle=defaults(a.mangle,{cache:a.nameCache&&(a.nameCache.vars||{}),eval:false,ie8:false,keep_fnames:false,properties:false,reserved:[],toplevel:false},true);if(a.mangle.properties){if(_typeof(a.mangle.properties)!="object"){a.mangle.properties={}}if(a.mangle.properties.keep_quoted){r=a.mangle.properties.reserved;if(!Array.isArray(r))r=[];a.mangle.properties.reserved=r}if(a.nameCache&&!("cache"in a.mangle.properties)){a.mangle.properties.cache=a.nameCache.props||{}}}init_cache(a.mangle.cache);init_cache(a.mangle.properties.cache)}if(a.sourceMap){a.sourceMap=defaults(a.sourceMap,{content:null,filename:null,includeSources:false,root:null,url:null},true)}var n=[];if(a.warnings)AST_Node.log_function(function(e){n.push(e)},a.warnings=="verbose");if(e)e.parse=Date.now();var t,s;if(_instanceof(o,AST_Toplevel)){s=o}else{if(typeof o=="string"){o=[o]}a.parse=a.parse||{};a.parse.toplevel=null;var p=a.sourceMap&&a.sourceMap.content;if(typeof p=="string"&&p!="inline"){p=parse_source_map(p)}t=p&&Object.create(null);for(var i in o){if(HOP(o,i)){a.parse.filename=i;a.parse.toplevel=parse(o[i],a.parse);if(t){if(p=="inline"){var c=read_source_map(i,o[i]);if(c){t[i]=parse_source_map(c)}}else{t[i]=p}}}}s=a.parse.toplevel}if(r){reserve_quoted_keys(s,r)}["enclose","wrap"].forEach(function(e){var r=a[e];if(!r)return;var n=s.print_to_string().slice(0,-1);s=s[e](r);o[s.start.file]=s.print_to_string().replace(n,"")});if(e)e.rename=Date.now();if(a.rename){s.figure_out_scope(a.mangle);s.expand_names(a.mangle)}if(e)e.compress=Date.now();if(a.compress)s=new Compressor(a.compress).compress(s);if(e)e.scope=Date.now();if(a.mangle)s.figure_out_scope(a.mangle);if(e)e.mangle=Date.now();if(a.mangle){s.compute_char_frequency(a.mangle);s.mangle_names(a.mangle)}if(e)e.properties=Date.now();if(a.mangle&&a.mangle.properties){s=mangle_properties(s,a.mangle.properties)}if(e)e.output=Date.now();var u={};if(a.output.ast){u.ast=s}if(!HOP(a.output,"code")||a.output.code){if(a.sourceMap){a.output.source_map=SourceMap({file:a.sourceMap.filename,orig:t,root:a.sourceMap.root});if(a.sourceMap.includeSources){if(_instanceof(o,AST_Toplevel)){throw new Error("original source content unavailable")}else for(var i in o){if(HOP(o,i)){a.output.source_map.get().setSourceContent(i,o[i])}}}else{a.output.source_map.get()._sourcesContents=null}}delete a.output.ast;delete a.output.code;var l=OutputStream(a.output);s.print(l);u.code=l.get();if(a.sourceMap){u.map=a.output.source_map.toString();var f=a.sourceMap.url;if(f){u.code=u.code.replace(/\n\/\/# sourceMappingURL=\S+\s*$/,"");if(f=="inline"){u.code+="\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,"+to_base64(u.map)}else{u.code+="\n//# sourceMappingURL="+f}}}}if(a.nameCache&&a.mangle){if(a.mangle.cache)a.nameCache.vars=to_json(a.mangle.cache);if(a.mangle.properties&&a.mangle.properties.cache){a.nameCache.props=to_json(a.mangle.properties.cache)}}if(e){e.end=Date.now();u.timings={parse:.001*(e.rename-e.parse),rename:.001*(e.compress-e.rename),compress:.001*(e.scope-e.compress),scope:.001*(e.mangle-e.scope),mangle:.001*(e.properties-e.mangle),properties:.001*(e.output-e.properties),output:.001*(e.end-e.output),total:.001*(e.end-e.start)}}if(n.length){u.warnings=n}return u}catch(e){return{error:e}}}
